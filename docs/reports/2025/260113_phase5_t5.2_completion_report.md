# Phase 5, T5.2 ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2026-01-13
**ì‘ì—…ì**: Claude Code
**ì‘ì—… ë²”ìœ„**: Multi-Strategy Orchestration - Position Ownership Query API with Pagination

---

## ğŸ“‹ ì‘ì—… ê°œìš”

Phase 5ì˜ ë‘ ë²ˆì§¸ ì‘ì—…ìœ¼ë¡œ **í¬ì§€ì…˜ ì†Œìœ ê¶Œ ì¡°íšŒ API**ì— í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ì‘ì—… ëª©í‘œ

```
GET /api/ownership ì—”ë“œí¬ì¸íŠ¸ ê°œì„ :
1. PositionOwnershipRepository í˜¸ì¶œ
2. í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„ (page, page_size íŒŒë¼ë¯¸í„°)
3. í•„í„°ë§ ê¸°ëŠ¥ (ticker, strategy_id)
4. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
```

---

## ğŸ¯ êµ¬í˜„ ë‚´ìš©

### 1. API ì—”ë“œí¬ì¸íŠ¸ ê°œì„ 

**íŒŒì¼**: `backend/api/strategy_router.py` (Lines 344-448)

#### ì—”ë“œí¬ì¸íŠ¸ ì •ë³´
- **URL**: `GET /api/ownership`
- **ê¸°ëŠ¥**: í¬ì§€ì…˜ ì†Œìœ ê¶Œ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜ í¬í•¨)
- **Router**: `ownership_router` (Multi-Strategy Orchestration)

#### ìš”ì²­ íŒŒë¼ë¯¸í„°

**í˜ì´ì§€ë„¤ì´ì…˜**:
```python
page: int = 1           # í˜ì´ì§€ ë²ˆí˜¸ (1ë¶€í„° ì‹œì‘, default=1)
page_size: int = 20     # í˜ì´ì§€ í¬ê¸° (1-100, default=20)
```

**í•„í„°ë§**:
```python
ticker: Optional[str] = None          # ì¢…ëª© ì½”ë“œ í•„í„°
strategy_id: Optional[str] = None     # ì „ëµ ID í•„í„°
```

#### ì‘ë‹µ ìŠ¤í‚¤ë§ˆ

```python
{
    "total": int,           # ì „ì²´ í•­ëª© ìˆ˜
    "page": int,            # í˜„ì¬ í˜ì´ì§€
    "page_size": int,       # í˜ì´ì§€ í¬ê¸°
    "total_pages": int,     # ì „ì²´ í˜ì´ì§€ ìˆ˜
    "items": [              # ì†Œìœ ê¶Œ ëª©ë¡
        {
            "id": str,                  # ì†Œìœ ê¶Œ ID (UUID)
            "ticker": str,              # ì¢…ëª© ì½”ë“œ
            "strategy_id": str,         # ì „ëµ ID
            "position_id": str | null,  # í¬ì§€ì…˜ ID
            "ownership_type": str,      # "primary" | "shared"
            "locked_until": datetime | null,  # ì ê¸ˆ í•´ì œ ì‹œê°
            "reasoning": str | null,    # ì†Œìœ  ì´ìœ 
            "created_at": datetime,     # ìƒì„± ì‹œê°
            "strategy": {               # ì „ëµ ì •ë³´ (nested)
                "id": str,
                "name": str,
                "display_name": str,
                "persona_type": str,
                "priority": int,
                "time_horizon": str,
                "is_active": bool,
                "config_metadata": dict | null,
                "created_at": datetime,
                "updated_at": datetime
            }
        }
    ]
}
```

#### êµ¬í˜„ íŠ¹ì§•

1. **í˜ì´ì§€ë„¤ì´ì…˜**
   - Offset/Limit ë°©ì‹ ì‚¬ìš©
   - í˜ì´ì§€ ë²ˆí˜¸ëŠ” 1ë¶€í„° ì‹œì‘ (ì‚¬ìš©ì ì¹œí™”ì )
   - ìµœëŒ€ í˜ì´ì§€ í¬ê¸° ì œí•œ: 100 (ì„±ëŠ¥ ë³´í˜¸)

2. **í•„í„°ë§**
   - Ticker í•„í„°: íŠ¹ì • ì¢…ëª©ì˜ ì†Œìœ ê¶Œ ì¡°íšŒ
   - Strategy í•„í„°: íŠ¹ì • ì „ëµì˜ ëª¨ë“  ì†Œìœ ê¶Œ ì¡°íšŒ
   - í•„í„°ê°€ ì—†ìœ¼ë©´ ì „ì²´ ì¡°íšŒ

3. **ì •ë ¬**
   - `created_at DESC` (ìµœì‹  ì†Œìœ ê¶Œ ìš°ì„ )

4. **JSON ì§ë ¬í™” ì²˜ë¦¬**
   - PostgreSQL JSONB íƒ€ì…ì˜ `config_metadata` í•„ë“œë¥¼ JSON íŒŒì‹±
   - Pydantic ê²€ì¦ ì˜¤ë¥˜ ë°©ì§€

5. **ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­**
   - `total` countëŠ” í˜ì´ì§€ë„¤ì´ì…˜ ì „ ì „ì²´ ì¿¼ë¦¬ì—ì„œ ê³„ì‚°
   - Strategy eager loading (N+1 ë¬¸ì œ ë°©ì§€)

### 2. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ êµ¬í˜„

**íŒŒì¼**: `backend/tests/test_ownership_api_pagination.py`

#### í…ŒìŠ¤íŠ¸ êµ¬ì¡°
- **Framework**: FastAPI TestClient
- **Database**: PostgreSQL (ì‹¤ì œ DB ì—°ê²°)
- **í…ŒìŠ¤íŠ¸ ë°ì´í„°**: 25ê°œ ì†Œìœ ê¶Œ (PG01 ~ PG25)

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (10ê°œ)

##### Test 1: ê¸°ë³¸ í˜ì´ì§€ë„¤ì´ì…˜
```python
# Given: 25ê°œ ì†Œìœ ê¶Œ ì¡´ì¬
# When: GET /api/ownership (default: page=1, page_size=20)
# Then:
#   - total >= 25
#   - page = 1
#   - items.length = 20 (ì²« í˜ì´ì§€)
#   - total_pages >= 2
```

##### Test 2: ë‘ ë²ˆì§¸ í˜ì´ì§€
```python
# When: GET /api/ownership?page=2&page_size=20
# Then:
#   - page = 2
#   - items.length >= 5 (ìµœì†Œ 5ê°œ, ì´ 25ê°œ)
```

##### Test 3: ì»¤ìŠ¤í…€ í˜ì´ì§€ í¬ê¸°
```python
# When: GET /api/ownership?page=1&page_size=10
# Then:
#   - page_size = 10
#   - items.length = 10
#   - total_pages >= 3 (25/10 = 3í˜ì´ì§€)
```

##### Test 4: ë²”ìœ„ ë°– í˜ì´ì§€
```python
# When: GET /api/ownership?page=999
# Then:
#   - page = 999
#   - items.length = 0 (ë¹ˆ í˜ì´ì§€)
#   - HTTP 200 OK (ì—ëŸ¬ ì•„ë‹˜)
```

##### Test 5: Ticker í•„í„°
```python
# When: GET /api/ownership?ticker=PG01
# Then:
#   - total = 1
#   - items[0].ticker = "PG01"
```

##### Test 6: Strategy í•„í„°
```python
# When: GET /api/ownership?strategy_id={long_term_id}
# Then:
#   - total >= 8 (ëŒ€ëµ 25/3 ì „ëµ)
#   - ëª¨ë“  itemì˜ strategy_idê°€ long_term_idì™€ ì¼ì¹˜
```

##### Test 7: ì‘ë‹µ êµ¬ì¡° ê²€ì¦
```python
# When: GET /api/ownership?page=1&page_size=5
# Then: ëª¨ë“  í•„ë“œ ì¡´ì¬ í™•ì¸
#   - top-level: total, page, page_size, total_pages, items
#   - item: id, ticker, strategy_id, ownership_type, created_at
#   - nested strategy: id, name, priority, etc.
```

##### Test 8: í˜ì´ì§€ í¬ê¸° ì œí•œ
```python
# When: GET /api/ownership?page_size=200 (max=100 ì´ˆê³¼)
# Then: HTTP 422 Unprocessable Entity
```

##### Test 9: ìµœì†Œ í˜ì´ì§€ ê²€ì¦
```python
# When: GET /api/ownership?page=0 (ìµœì†Œê°’ 1 ë¯¸ë§Œ)
# Then: HTTP 422 Unprocessable Entity
```

##### Test 10: ë¹ˆ ê²°ê³¼ ì²˜ë¦¬
```python
# Given: í…ŒìŠ¤íŠ¸ ë°ì´í„° ëª¨ë‘ ì‚­ì œ
# When: GET /api/ownership
# Then:
#   - total >= 0
#   - total_pages = 0
#   - items = [] (ë¹ˆ ë°°ì—´)
```

#### í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼

```bash
$ python backend/tests/test_ownership_api_pagination.py

============================================================
Testing GET /api/ownership (Phase 5, T5.2)
============================================================

=== Strategy IDs ===
Long Term: 2149eaf1-545c-40e5-a3c6-12f986e23575 (Priority: 100)
Trading: d3c1e0fe-bca1-4c1e-8e85-fe337c180f1a (Priority: 50)
Aggressive: 2bcaf9e6-6600-4b19-a1aa-9ee5aaa675a4 (Priority: 30)

--- Test 1: Default Pagination ---
âœ… Created 25 test ownerships
âœ… Test 1 PASSED
   Total: 25, Page: 1/2
   Items on page: 20

--- Test 2: Second Page ---
âœ… Test 2 PASSED
   Page 2 items: 5

--- Test 3: Custom Page Size ---
âœ… Test 3 PASSED
   Page size: 10, Total pages: 3

--- Test 4: Out of Range Page ---
âœ… Test 4 PASSED: Empty page handled correctly

--- Test 5: Filter by Ticker ---
âœ… Test 5 PASSED
   Ticker filter: PG01, Found: 1

--- Test 6: Filter by Strategy ---
âœ… Test 6 PASSED
   Strategy filter: long_term, Found: 9

--- Test 7: Response Structure ---
âœ… Test 7 PASSED: Response structure valid

--- Test 8: Page Size Limit ---
âœ… Test 8 PASSED: Page size limit enforced (422)

--- Test 9: Minimum Page Validation ---
âœ… Test 9 PASSED: Minimum page validation enforced (422)

--- Test 10: Empty Result Set ---
âœ… Test 10 PASSED: Empty result handled correctly

============================================================
âœ… All Tests PASSED! Phase 5, T5.2 is complete.
============================================================
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: 404 Not Found ì—ëŸ¬

**ì¦ìƒ**:
```
GET /api/v1/positions/ownership â†’ 404 Not Found
```

**ì›ì¸**:
- í…ŒìŠ¤íŠ¸ì—ì„œ `/api/v1/positions/ownership` ê²½ë¡œ ì‚¬ìš©
- ì‹¤ì œ ë¼ìš°í„°ëŠ” `/api/ownership`ìœ¼ë¡œ ë“±ë¡ë¨ (main.py:685)

**í•´ê²° ë°©ë²•**:
```python
# Before
response = client.get("/api/v1/positions/ownership")

# After
response = client.get("/api/ownership")
```

### ë¬¸ì œ 2: Ticker ê¸¸ì´ ì œí•œ ì´ˆê³¼

**ì¦ìƒ**:
```python
pydantic_core.ValidationError: ticker
  String should have at most 10 characters [input_value='PAGE_TEST_25']
```

**ì›ì¸**:
- í…ŒìŠ¤íŠ¸ í‹°ì»¤: `PAGE_TEST_25` (12ê¸€ì)
- ìŠ¤í‚¤ë§ˆ ì œí•œ: `max_length=10` (strategy_schemas.py)

**í•´ê²° ë°©ë²•**:
```python
# Before
ticker = f"PAGE_TEST_{i}"  # 12-14 characters

# After
ticker = f"PG{i:02d}"  # 4 characters (PG01, PG02, ..., PG25)
```

### ë¬¸ì œ 3: config_metadata JSON ì§ë ¬í™” ì˜¤ë¥˜

**ì¦ìƒ**:
```python
pydantic_core.ValidationError: config_metadata
  Input should be a valid dictionary [input_value='{"max_holding_days": 7...', input_type=str]
```

**ì›ì¸**:
- PostgreSQL JSONB íƒ€ì…ì´ Pythonì—ì„œ ë¬¸ìì—´ë¡œ ë°˜í™˜ë¨
- Pydanticì€ dict íƒ€ì… ê¸°ëŒ€

**í•´ê²° ë°©ë²•**:
```python
# Strategy ì‘ë‹µ ìƒì„± ì‹œ JSON íŒŒì‹±
config_meta = o.strategy.config_metadata
if isinstance(config_meta, str):
    try:
        config_meta = json.loads(config_meta)
    except:
        config_meta = None

strategy_dict = {
    # ... other fields
    "config_metadata": config_meta,  # Parsed dict
}
```

### ë¬¸ì œ 4: get_by_ticker() ë°˜í™˜ íƒ€ì… ë¶ˆì¼ì¹˜

**ì¦ìƒ**:
```python
sqlalchemy.orm.exc.UnmappedInstanceError: Class 'builtins.list' is not mapped
```

**ì›ì¸**:
- `get_by_ticker()`ê°€ ë‹¨ì¼ ê°ì²´ê°€ ì•„ë‹Œ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
- `db.delete(ownership)` í˜¸ì¶œ ì‹œ íƒ€ì… ì˜¤ë¥˜

**í•´ê²° ë°©ë²•**:
```python
# Before
ownership = ownership_repo.get_by_ticker(ticker)
if ownership:
    db.delete(ownership)  # âŒ list íƒ€ì…

# After
ownerships = ownership_repo.get_by_ticker(ticker)
if ownerships:
    if isinstance(ownerships, list):
        for ownership in ownerships:
            db.delete(ownership)  # âœ… ê° item ì‚­ì œ
```

---

## ğŸ“ ë³€ê²½ëœ íŒŒì¼

### 1. backend/api/strategy_router.py
**ë³€ê²½ ë‚´ìš©**:
- `PositionOwnership` ëª¨ë¸ import ì¶”ê°€
- `GET /` ì—”ë“œí¬ì¸íŠ¸ ê°œì„  (Lines 344-448)
  - í˜ì´ì§€ë„¤ì´ì…˜ íŒŒë¼ë¯¸í„° ì¶”ê°€ (page, page_size)
  - Offset/Limit ì¿¼ë¦¬ êµ¬í˜„
  - Total count ë° total_pages ê³„ì‚°
  - JSON config_metadata íŒŒì‹± ë¡œì§ ì¶”ê°€

**ì£¼ìš” ë¡œì§**:
```python
@ownership_router.get("/")
def list_ownerships(
    ticker: Optional[str] = Query(None),
    strategy_id: Optional[str] = Query(None),
    page: int = Query(1, ge=1),
    page_size: int = Query(20, ge=1, le=100),
    db: Session = Depends(get_db)
):
    # Build base query with filters
    if ticker:
        query = db.query(PositionOwnership).filter(
            PositionOwnership.ticker == ticker.upper()
        )
    elif strategy_id:
        query = db.query(PositionOwnership).filter(
            PositionOwnership.strategy_id == strategy_id
        )
    else:
        query = db.query(PositionOwnership)

    # Get total count
    total = query.count()

    # Apply pagination
    offset = (page - 1) * page_size
    ownerships = query.order_by(
        PositionOwnership.created_at.desc()
    ).offset(offset).limit(page_size).all()

    # Calculate total pages
    total_pages = (total + page_size - 1) // page_size if total > 0 else 0

    # Convert to response (with JSON parsing)
    # ...

    return {
        "total": total,
        "page": page,
        "page_size": page_size,
        "total_pages": total_pages,
        "items": items
    }
```

### 2. backend/tests/test_ownership_api_pagination.py
**ë³€ê²½ ë‚´ìš©**:
- ì‹ ê·œ íŒŒì¼ ìƒì„±
- FastAPI TestClientë¥¼ ì‚¬ìš©í•œ 10ê°œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
- í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§, ê²€ì¦ í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ í—¬í¼**:
```python
def cleanup_test_ownerships():
    """í…ŒìŠ¤íŠ¸ ì†Œìœ ê¶Œ ë°ì´í„° ì •ë¦¬"""
    test_tickers = [f"PG{i:02d}" for i in range(1, 26)]
    for ticker in test_tickers:
        ownerships = ownership_repo.get_by_ticker(ticker)
        if ownerships:
            if isinstance(ownerships, list):
                for ownership in ownerships:
                    db.delete(ownership)
    db.commit()

def create_test_ownerships(count: int = 25):
    """í…ŒìŠ¤íŠ¸ìš© ì†Œìœ ê¶Œ ë°ì´í„° ìƒì„±"""
    cleanup_test_ownerships()
    strategies = [long_term, trading, aggressive]

    for i in range(1, count + 1):
        strategy = strategies[i % 3]
        ticker = f"PG{i:02d}"
        ownership_repo.create(...)

    db.commit()
```

---

## ğŸ” ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] í˜ì´ì§€ë„¤ì´ì…˜ íŒŒë¼ë¯¸í„° êµ¬í˜„ (page, page_size)
- [x] í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„ (ticker, strategy_id)
- [x] ì •ë ¬ ê¸°ëŠ¥ (created_at DESC)
- [x] Total count ë° total_pages ê³„ì‚°
- [x] Offset/Limit ì¿¼ë¦¬ ì •í™•ì„±
- [x] í˜ì´ì§€ í¬ê¸° ì œí•œ (max=100)
- [x] ìµœì†Œ í˜ì´ì§€ ê²€ì¦ (min=1)
- [x] ë¹ˆ ê²°ê³¼ ì²˜ë¦¬
- [x] ë²”ìœ„ ë°– í˜ì´ì§€ ì²˜ë¦¬
- [x] JSON config_metadata íŒŒì‹±
- [x] 10ê°œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ í†µê³¼

---

## ğŸ“ ê¸°ìˆ ì  ì¸ì‚¬ì´íŠ¸

### 1. í˜ì´ì§€ë„¤ì´ì…˜ ì„¤ê³„ ì›ì¹™

**Offset/Limit vs Cursor-based**:
- **Offset/Limit**: êµ¬í˜„ ë‹¨ìˆœ, ì„ì˜ í˜ì´ì§€ ì ‘ê·¼ ê°€ëŠ¥
- **Cursor-based**: ëŒ€ìš©ëŸ‰ ë°ì´í„°ì— ìœ ë¦¬, ì¼ê´€ì„± ë³´ì¥

í˜„ì¬ êµ¬í˜„ì€ **Offset/Limit ë°©ì‹** ì‚¬ìš©:
- ì†Œìœ ê¶Œ ë°ì´í„°ëŠ” ëŒ€ê·œëª¨ê°€ ì•„ë‹˜ (ìˆ˜ë°±~ìˆ˜ì²œ ê±´)
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì„ì˜ í˜ì´ì§€ ì´ë™ í•„ìš”
- êµ¬í˜„ ë³µì¡ë„ ë‚®ìŒ

### 2. PostgreSQL JSONB ì²˜ë¦¬

PostgreSQLì˜ JSONB íƒ€ì…ì€ Pythonì—ì„œ ë‘ ê°€ì§€ í˜•íƒœë¡œ ë°˜í™˜ë  ìˆ˜ ìˆìŒ:
1. **dict** (psycopg2ê°€ ìë™ íŒŒì‹±)
2. **str** (ORM ì„¤ì •ì— ë”°ë¼ ë¬¸ìì—´ë¡œ ë°˜í™˜)

**í•´ê²° ë°©ë²•**:
```python
if isinstance(config_meta, str):
    config_meta = json.loads(config_meta)
```

### 3. N+1 ì¿¼ë¦¬ ë¬¸ì œ ë°©ì§€

Ownership ì¡°íšŒ ì‹œ ì—°ê´€ëœ Strategyë¥¼ í•¨ê»˜ ë¡œë“œ:
```python
# SQLAlchemy relationship with lazy='joined'
strategy = relationship("Strategy", lazy="joined")
```

í•˜ì§€ë§Œ í˜ì´ì§€ë„¤ì´ì…˜ ì‹œ Strategyê°€ ì—†ëŠ” ê²½ìš°ë„ ìˆìœ¼ë¯€ë¡œ:
```python
if o.strategy:
    # Strategyê°€ ìˆì„ ë•Œë§Œ íŒŒì‹±
```

### 4. FastAPI Query íŒŒë¼ë¯¸í„° ê²€ì¦

FastAPIëŠ” Pydanticì„ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ìë™ ê²€ì¦:
```python
page: int = Query(1, ge=1)              # >= 1
page_size: int = Query(20, ge=1, le=100)  # 1 ~ 100
```

ê²€ì¦ ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ HTTP 422 Unprocessable Entity ë°˜í™˜.

---

## ğŸ“Š ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### í˜„ì¬ êµ¬í˜„
- **ë™ê¸° ì²˜ë¦¬**: SQLAlchemy ë™ê¸° ì„¸ì…˜ ì‚¬ìš©
- **Eager Loading**: Strategy ì¡°ì¸ ë¡œë“œ
- **í˜ì´ì§€ í¬ê¸° ì œí•œ**: Max 100 (DDoS ë°©ì§€)

### ê°œì„  ê°€ëŠ¥ ì˜ì—­

1. **ìºì‹±**
   - Total count ìºì‹± (ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠìŒ)
   - Redis ë“±ì„ í™œìš©í•œ ë¶„ì‚° ìºì‹œ

2. **ì¸ë±ìŠ¤ ìµœì í™”**
   - `ticker`, `strategy_id`, `created_at` ì¸ë±ìŠ¤ í™•ì¸
   - ë³µí•© ì¸ë±ìŠ¤ ê³ ë ¤

3. **ë¹„ë™ê¸° ì²˜ë¦¬**
   - SQLAlchemy async ì„¸ì…˜ ì‚¬ìš©
   - ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ëŒ€ì‘

4. **Cursor-based Pagination**
   - ë§¤ìš° í° ë°ì´í„°ì…‹ì—ì„œ ì„±ëŠ¥ í–¥ìƒ
   - `created_at` + `id` ê¸°ë°˜ ì»¤ì„œ

---

## ğŸš€ ì‚¬ìš© ì˜ˆì‹œ

### 1. ê¸°ë³¸ ì¡°íšŒ (ì²« í˜ì´ì§€)

```bash
curl "http://localhost:8001/api/ownership"
```

**ì‘ë‹µ**:
```json
{
  "total": 25,
  "page": 1,
  "page_size": 20,
  "total_pages": 2,
  "items": [
    {
      "id": "uuid-1",
      "ticker": "PG25",
      "strategy_id": "uuid-long-term",
      "ownership_type": "primary",
      "created_at": "2026-01-13T07:54:00",
      "strategy": {
        "name": "long_term",
        "priority": 100,
        ...
      }
    },
    ...
  ]
}
```

### 2. íŠ¹ì • í˜ì´ì§€ ì¡°íšŒ

```bash
curl "http://localhost:8001/api/ownership?page=2&page_size=10"
```

### 3. Ticker í•„í„°

```bash
curl "http://localhost:8001/api/ownership?ticker=AAPL"
```

### 4. Strategy í•„í„°

```bash
curl "http://localhost:8001/api/ownership?strategy_id=2149eaf1-545c-40e5-a3c6-12f986e23575"
```

### 5. í”„ë¡ íŠ¸ì—”ë“œ í†µí•© (React ì˜ˆì‹œ)

```typescript
// Frontend (React + TanStack Query)
const { data, isLoading } = useQuery({
  queryKey: ['ownerships', page, pageSize, ticker],
  queryFn: async () => {
    const params = new URLSearchParams({
      page: page.toString(),
      page_size: pageSize.toString(),
      ...(ticker && { ticker })
    });

    const response = await fetch(
      `http://localhost:8001/api/ownership?${params}`
    );
    return response.json();
  }
});

// Render pagination
<Pagination
  currentPage={data.page}
  totalPages={data.total_pages}
  onPageChange={setPage}
/>
```

---

## âœ… ê²°ë¡ 

Phase 5, T5.2 ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼**:
- âœ… í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ (Offset/Limit ë°©ì‹)
- âœ… í•„í„°ë§ ê¸°ëŠ¥ (ticker, strategy_id)
- âœ… 10ê°œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ í†µê³¼
- âœ… JSON ì§ë ¬í™” ë¬¸ì œ í•´ê²°
- âœ… í˜ì´ì§€ í¬ê¸° ì œí•œ ë° ê²€ì¦
- âœ… í”„ë¡ íŠ¸ì—”ë“œ í†µí•© ì¤€ë¹„ ì™„ë£Œ

**ë‹¤ìŒ ì‘ì—…**: Phase 5, T5.3 (í†µí•© í…ŒìŠ¤íŠ¸) ë˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ í†µí•© ì§„í–‰ ì˜ˆì •

---

**ì‘ì„±ì**: Claude Code
**ê²€í† ì**: -
**ìŠ¹ì¸ì**: -
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-01-13
