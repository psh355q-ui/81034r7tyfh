# Phase 5, T5.5 ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2026-01-13
**ì‘ì—…ì**: Claude Code (Full-Stack Implementation)
**ì‘ì—… ë²”ìœ„**: Multi-Strategy Orchestration - Conflict Alert Banner with WebSocket

---

## ğŸ“‹ ì‘ì—… ê°œìš”

Multi-Strategy Dashboardì— **ì‹¤ì‹œê°„ ì¶©ëŒ ê²½ê³  ë°°ë„ˆ**ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ì‘ì—… ëª©í‘œ

```
ì¶©ëŒ ê²½ê³  ì»´í¬ë„ŒíŠ¸ êµ¬í˜„:
1. WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì¶©ëŒ ì•Œë¦¼
2. ConflictAlertBanner React ì»´í¬ë„ŒíŠ¸
3. ë°±ì—”ë“œ WebSocket ì—”ë“œí¬ì¸íŠ¸
4. Event Bus ì—°ë™
```

---

## ğŸ¯ êµ¬í˜„ ë‚´ìš©

### 1. í”„ë¡ íŠ¸ì—”ë“œ: ConflictAlertBanner ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `frontend/src/components/conflict/ConflictAlertBanner.tsx`

#### ì£¼ìš” ê¸°ëŠ¥

```typescript
interface ConflictAlertBannerProps {
  maxConflicts?: number;     // ìµœëŒ€ í‘œì‹œ ì¶©ëŒ ìˆ˜ (ê¸°ë³¸ê°’: 3)
  autoDismissMs?: number;    // ìë™ ë‹«í˜ ì‹œê°„ (ê¸°ë³¸ê°’: 10ì´ˆ)
}
```

#### WebSocket ì—°ê²°

```typescript
const WS_URL = window.location.hostname === 'localhost'
  ? 'ws://127.0.0.1:8001/api/conflicts/ws'
  : `ws://${window.location.hostname}:8001/api/conflicts/ws`;

useEffect(() => {
  const ws = new WebSocket(WS_URL);

  ws.onopen = () => {
    console.log('[ConflictWS] Connected to conflict event stream');
    setIsConnected(true);
  };

  ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    if (data.type === 'CONFLICT_DETECTED') {
      const conflict: OrderConflict = data.data;
      setConflicts((prev) => [conflict, ...prev].slice(0, maxConflicts));
      setIsDismissed(false);
    }
  };

  // ... error handling
}, [maxConflicts, autoDismissMs]);
```

#### UI êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ì „ëµ ì¶©ëŒ ê°ì§€                      [ëª¨ë‘ ì§€ìš°ê¸°] [X]     â”‚
â”‚ 3ê°œì˜ ì¶©ëŒì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AAPL   [ì¥ê¸° íˆ¬ì] vs [ë‹¨ê¸° íŠ¸ë ˆì´ë”©]  í¬ì§€ì…˜ ì¶©ëŒ   ì°¨ë‹¨ë¨â”‚ â”‚
â”‚ â”‚ ì´ìœ : ì¥ê¸° íˆ¬ì ì „ëµì´ ì´ë¯¸ í¬ì§€ì…˜ ì†Œìœ  ì¤‘               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ TSLA   [ê³µê²©ì  íˆ¬ì] vs [ë°°ë‹¹ íˆ¬ì]  ìš°ì„ ìˆœìœ„ ì¶©ëŒ  ì˜¤ë²„ë¼â”‚ â”‚
â”‚ â”‚ ì´ìœ : ê³µê²©ì  íˆ¬ì ìš°ì„ ìˆœìœ„ 90 > ë°°ë‹¹ íˆ¬ì 70            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ NVDA   [ë‹¨ê¸° íŠ¸ë ˆì´ë”©] vs [ì¥ê¸° íˆ¬ì]  ì†Œìœ ê¶Œ ì ê¸ˆ  ëŒ€ê¸°ì¤‘â”‚ â”‚
â”‚ â”‚ ì´ìœ : ì†Œìœ ê¶Œì´ 2026-01-13 15:30ê¹Œì§€ ì ê¸ˆ               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì¶©ëŒ íƒ€ì… ë° í•´ê²° ìƒíƒœ

**ì¶©ëŒ íƒ€ì…**:
- `position_conflict`: í¬ì§€ì…˜ ì¶©ëŒ
- `priority_conflict`: ìš°ì„ ìˆœìœ„ ì¶©ëŒ
- `ownership_locked`: ì†Œìœ ê¶Œ ì ê¸ˆ

**í•´ê²° ìƒíƒœ**:
- `blocked`: ì°¨ë‹¨ë¨ (ë¹¨ê°„ìƒ‰ ë°°ì§€)
- `override`: ì˜¤ë²„ë¼ì´ë“œ (ë…¸ë€ìƒ‰ ë°°ì§€)
- `pending`: ëŒ€ê¸° ì¤‘ (íšŒìƒ‰ ë°°ì§€)

#### ì£¼ìš” Props ë° í•¨ìˆ˜

```typescript
// ìë™ ë‹«í˜
if (autoDismissMs > 0) {
  setTimeout(() => setIsDismissed(true), autoDismissMs);
}

// ìˆ˜ë™ ë‹«ê¸°
const handleDismiss = () => setIsDismissed(true);

// ëª¨ë‘ ì§€ìš°ê¸°
const handleClearAll = () => {
  setConflicts([]);
  setIsDismissed(true);
};
```

### 2. íƒ€ì… ì •ì˜: OrderConflict

**íŒŒì¼**: `frontend/src/types/strategy.ts`

```typescript
export interface OrderConflict {
  id: string;
  ticker: string;
  strategy_id: string;
  conflicting_strategy_id: string;
  conflict_type: 'position_conflict' | 'priority_conflict' | 'ownership_locked';
  resolution: 'blocked' | 'override' | 'pending';
  reason: string;
  created_at: string;
  strategy?: Strategy;
  conflicting_strategy?: Strategy;
}
```

### 3. StrategyDashboard í†µí•©

**íŒŒì¼**: `frontend/src/pages/StrategyDashboard.tsx`

```typescript
import { ConflictAlertBanner } from '../components/conflict/ConflictAlertBanner';

// JSX:
<main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  {/* Conflict Alert Banner */}
  <ConflictAlertBanner maxConflicts={3} autoDismissMs={10000} />

  {/* Strategy Cards Section */}
  <StrategyCardGrid ... />

  {/* Position Ownership Table */}
  <PositionOwnershipTable ... />
</main>
```

---

## ğŸ”§ ë°±ì—”ë“œ êµ¬í˜„

### 1. WebSocket Connection Manager

**íŒŒì¼**: `backend/api/strategy_router.py`

```python
class ConflictWebSocketManager:
    """Manages WebSocket connections for real-time conflict alerts"""

    def __init__(self):
        self.active_connections: Set[WebSocket] = set()

    async def connect(self, websocket: WebSocket):
        """Accept new WebSocket connection"""
        await websocket.accept()
        self.active_connections.add(websocket)
        logger.info(f"[ConflictWS] New connection. Total: {len(self.active_connections)}")

    def disconnect(self, websocket: WebSocket):
        """Remove WebSocket connection"""
        self.active_connections.discard(websocket)
        logger.info(f"[ConflictWS] Connection closed. Total: {len(self.active_connections)}")

    async def broadcast(self, message: dict):
        """Broadcast message to all connected clients"""
        disconnected = set()
        for connection in self.active_connections:
            try:
                await connection.send_json(message)
            except Exception as e:
                logger.error(f"[ConflictWS] Broadcast error: {e}")
                disconnected.add(connection)

        # Remove disconnected clients
        for conn in disconnected:
            self.disconnect(conn)

# Global WebSocket manager instance
conflict_ws_manager = ConflictWebSocketManager()
```

### 2. WebSocket ì—”ë“œí¬ì¸íŠ¸

**íŒŒì¼**: `backend/main.py`

```python
from backend.api.strategy_router import (
    strategy_router,
    ownership_router,
    conflict_router,
    conflict_ws_manager
)

# WebSocket endpoint for real-time conflict alerts
@app.websocket("/api/conflicts/ws")
async def websocket_conflict_endpoint(websocket: WebSocket):
    """
    Real-time conflict alerts WebSocket endpoint.
    Broadcasts CONFLICT_DETECTED events to all connected clients.
    """
    await conflict_ws_manager.connect(websocket)
    try:
        while True:
            # Keep connection alive
            await websocket.receive_text()
    except WebSocketDisconnect:
        conflict_ws_manager.disconnect(websocket)

logger.info("âœ… Conflict WebSocket endpoint mounted at /api/conflicts/ws")
```

### 3. Event Subscriber ì—…ë°ì´íŠ¸

**íŒŒì¼**: `backend/events/subscribers.py`

```python
import asyncio
from typing import Dict, Any

# Global reference to WebSocket manager
_conflict_ws_manager = None

def set_conflict_ws_manager(manager):
    """Set the global WebSocket manager reference"""
    global _conflict_ws_manager
    _conflict_ws_manager = manager

class ConflictEventSubscriber:
    """ì¶©ëŒ ê´€ë ¨ ì´ë²¤íŠ¸ êµ¬ë…ì"""

    @retry(max_retries=3, delay=1)
    def handle_conflict_detected(self, data: Dict[str, Any]):
        """
        CONFLICT_DETECTED ì²˜ë¦¬
        - ëª©í‘œ: ë¡œê·¸ ì €ì¥ ë° ì¤‘ìš” ì•Œë¦¼
        - WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ë¸Œë¡œë“œìºìŠ¤íŠ¸
        """
        ticker = data.get('ticker')
        strategy_id = data.get('strategy_id')
        detail = data.get('conflict_detail', {})

        logger.warning(f"âš ï¸ [CONFLICT_DETECTED] {ticker} by {strategy_id}. Detail: {detail}")

        # Broadcast to WebSocket clients
        if _conflict_ws_manager:
            message = {
                'type': 'CONFLICT_DETECTED',
                'data': data
            }
            try:
                # Run async broadcast in event loop
                loop = asyncio.get_event_loop()
                if loop.is_running():
                    asyncio.create_task(_conflict_ws_manager.broadcast(message))
                else:
                    loop.run_until_complete(_conflict_ws_manager.broadcast(message))
            except Exception as e:
                logger.error(f"Failed to broadcast conflict: {e}")
```

### 4. Manager ì—°ê²°

**íŒŒì¼**: `backend/main.py`

```python
from backend.events.subscribers import register_subscribers, set_conflict_ws_manager

# Connect WebSocket manager to event subscribers
set_conflict_ws_manager(conflict_ws_manager)
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### WebSocket í†µì‹  íë¦„

```
1. Frontend ì—°ê²°
   â””â”€> ws://localhost:8001/api/conflicts/ws
       â””â”€> ConflictWebSocketManager.connect()

2. ì¶©ëŒ ê°ì§€
   â””â”€> OrderManager.execute_order()
       â””â”€> ConflictDetector.check_conflicts()
           â””â”€> event_bus.publish(EventType.CONFLICT_DETECTED, data)

3. Event Subscriber ì²˜ë¦¬
   â””â”€> ConflictEventSubscriber.handle_conflict_detected()
       â””â”€> conflict_ws_manager.broadcast({
             'type': 'CONFLICT_DETECTED',
             'data': {
               'id': 'uuid',
               'ticker': 'AAPL',
               'strategy_id': 'strategy-1',
               'conflicting_strategy_id': 'strategy-2',
               'conflict_type': 'position_conflict',
               'resolution': 'blocked',
               'reason': '...',
               'created_at': '2026-01-13T15:30:00'
             }
           })

4. Frontend ìˆ˜ì‹ 
   â””â”€> ws.onmessage
       â””â”€> setConflicts([newConflict, ...prev])
           â””â”€> UI ì—…ë°ì´íŠ¸ (ë°°ë„ˆ í‘œì‹œ)
```

### ë©”ì‹œì§€ í¬ë§·

```json
{
  "type": "CONFLICT_DETECTED",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "ticker": "AAPL",
    "strategy_id": "strategy-long-term",
    "conflicting_strategy_id": "strategy-trading",
    "conflict_type": "position_conflict",
    "resolution": "blocked",
    "reason": "ì¥ê¸° íˆ¬ì ì „ëµì´ ì´ë¯¸ AAPL í¬ì§€ì…˜ ì†Œìœ  ì¤‘",
    "created_at": "2026-01-13T15:30:00.000Z",
    "strategy": {
      "id": "strategy-trading",
      "name": "ë‹¨ê¸° íŠ¸ë ˆì´ë”©",
      "persona_type": "trading",
      "priority": 60
    },
    "conflicting_strategy": {
      "id": "strategy-long-term",
      "name": "ì¥ê¸° íˆ¬ì",
      "persona_type": "long_term",
      "priority": 80
    }
  }
}
```

---

## ğŸ“ ë³€ê²½ëœ íŒŒì¼

### ì‹ ê·œ íŒŒì¼ (1ê°œ)
1. `frontend/src/components/conflict/ConflictAlertBanner.tsx` - ì¶©ëŒ ê²½ê³  ë°°ë„ˆ ì»´í¬ë„ŒíŠ¸

### ìˆ˜ì •ëœ íŒŒì¼ (5ê°œ)
1. `frontend/src/types/strategy.ts` - OrderConflict íƒ€ì… ì¶”ê°€
2. `frontend/src/pages/StrategyDashboard.tsx` - ConflictAlertBanner í†µí•©
3. `backend/api/strategy_router.py` - ConflictWebSocketManager ì¶”ê°€
4. `backend/events/subscribers.py` - WebSocket ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë¡œì§
5. `backend/main.py` - WebSocket ì—”ë“œí¬ì¸íŠ¸ ë§ˆìš´íŠ¸

---

## ğŸ“ ê¸°ìˆ ì  ì¸ì‚¬ì´íŠ¸

### 1. WebSocket ì—°ê²° ê´€ë¦¬

**ìë™ ì¬ì—°ê²° ì—†ìŒ**:
- í˜„ì¬ëŠ” ì—°ê²° ëŠê¹€ ì‹œ ìë™ ì¬ì—°ê²° ì—†ìŒ
- í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¬ì—°ê²° ë¡œì§ ì¶”ê°€ í•„ìš”

```typescript
// Future improvement: Auto-reconnect
let reconnectTimeout: NodeJS.Timeout;
ws.onclose = () => {
  console.log('[ConflictWS] Disconnected, reconnecting in 3s...');
  reconnectTimeout = setTimeout(() => connectWebSocket(), 3000);
};
```

### 2. ì´ë²¤íŠ¸ ë£¨í”„ ì²˜ë¦¬

**Async ë¸Œë¡œë“œìºìŠ¤íŠ¸**:
```python
loop = asyncio.get_event_loop()
if loop.is_running():
    asyncio.create_task(_conflict_ws_manager.broadcast(message))
else:
    loop.run_until_complete(_conflict_ws_manager.broadcast(message))
```

- ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œëŠ” `create_task()` ì‚¬ìš©
- ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ `run_until_complete()` ì‚¬ìš©

### 3. ì—°ê²° ì •ë¦¬

**ëŠì–´ì§„ ì—°ê²° ì œê±°**:
```python
async def broadcast(self, message: dict):
    disconnected = set()
    for connection in self.active_connections:
        try:
            await connection.send_json(message)
        except Exception as e:
            disconnected.add(connection)

    # Remove disconnected clients
    for conn in disconnected:
        self.disconnect(conn)
```

### 4. UI ìƒíƒœ ê´€ë¦¬

**ì¶©ëŒ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬**:
```typescript
// ìƒˆ ì¶©ëŒ ì¶”ê°€ (ìµœëŒ€ maxConflictsê°œ ìœ ì§€)
setConflicts((prev) => [conflict, ...prev].slice(0, maxConflicts));

// ìë™ ë‹«í˜
setTimeout(() => setIsDismissed(true), autoDismissMs);
```

### 5. ì¡°ê±´ë¶€ ë Œë”ë§

```typescript
// ì¶©ëŒ ì—†ê±°ë‚˜ ë‹«íŒ ìƒíƒœë©´ ë Œë”ë§ ì•ˆ í•¨
if (conflicts.length === 0 || isDismissed) {
  return null;
}
```

---

## ğŸ” í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### 1. ë¡œì»¬ í™˜ê²½ ì‹¤í–‰

```bash
# Backend (í¬íŠ¸ 8001)
cd d:/code/ai-trading-system
python -m uvicorn backend.main:app --reload --port 8001

# Frontend (í¬íŠ¸ 3002)
cd frontend
npm run dev -- --port 3002
```

### 2. ë¸Œë¼ìš°ì € ì ‘ì†

```
http://localhost:3002/strategies
```

### 3. WebSocket ì—°ê²° í™•ì¸

**ê°œë°œì ë„êµ¬ â†’ ë„¤íŠ¸ì›Œí¬ íƒ­ â†’ WS í•„í„°**:
```
ws://127.0.0.1:8001/api/conflicts/ws
Status: 101 Switching Protocols
```

**ì½˜ì†” ë¡œê·¸**:
```
[ConflictWS] Connected to conflict event stream
```

### 4. ì¶©ëŒ ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜

#### ë°©ë²• 1: Event Bus ì§ì ‘ ë°œí–‰ (Python)

```python
from backend.events import event_bus, EventType

# ì¶©ëŒ ì´ë²¤íŠ¸ ë°œí–‰
event_bus.publish(EventType.CONFLICT_DETECTED, {
    'id': 'test-conflict-1',
    'ticker': 'AAPL',
    'strategy_id': 'strategy-trading',
    'conflicting_strategy_id': 'strategy-long-term',
    'conflict_type': 'position_conflict',
    'resolution': 'blocked',
    'reason': 'Test conflict: ì¥ê¸° íˆ¬ì ì „ëµì´ ì´ë¯¸ AAPL í¬ì§€ì…˜ ì†Œìœ  ì¤‘',
    'created_at': '2026-01-13T15:30:00Z',
    'strategy': {
        'id': 'strategy-trading',
        'name': 'ë‹¨ê¸° íŠ¸ë ˆì´ë”©',
        'persona_type': 'trading',
        'priority': 60
    },
    'conflicting_strategy': {
        'id': 'strategy-long-term',
        'name': 'ì¥ê¸° íˆ¬ì',
        'persona_type': 'long_term',
        'priority': 80
    }
})
```

#### ë°©ë²• 2: OrderManager í…ŒìŠ¤íŠ¸

```python
# Phase 4 OrderManager integration test ì‹¤í–‰
pytest backend/tests/test_order_conflict_integration.py -v
```

#### ë°©ë²• 3: WebSocket ìˆ˜ë™ í…ŒìŠ¤íŠ¸ (wscat)

```bash
# Install wscat
npm install -g wscat

# Connect to WebSocket
wscat -c ws://localhost:8001/api/conflicts/ws

# Send test message from backend
# (ë°±ì—”ë“œì—ì„œ event_bus.publish() ì‹¤í–‰)
```

### 5. í™•ì¸ ì‚¬í•­

#### UI í‘œì‹œ
1. ì¶©ëŒ ë°°ë„ˆê°€ í™”ë©´ ìƒë‹¨ì— í‘œì‹œë˜ëŠ”ê°€?
2. í‹°ì»¤, ì „ëµ ë°°ì§€, ì¶©ëŒ íƒ€ì…, í•´ê²° ìƒíƒœê°€ ì˜¬ë°”ë¥¸ê°€?
3. ì´ìœ (reason) í…ìŠ¤íŠ¸ê°€ í‘œì‹œë˜ëŠ”ê°€?

#### ìë™ ë‹«í˜
1. 10ì´ˆ í›„ ë°°ë„ˆê°€ ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ëŠ”ê°€?
2. ìƒˆ ì¶©ëŒ ë„ì°© ì‹œ ë‹¤ì‹œ í‘œì‹œë˜ëŠ”ê°€?

#### ìˆ˜ë™ ì œì–´
1. "ëª¨ë‘ ì§€ìš°ê¸°" ë²„íŠ¼ìœ¼ë¡œ ì¶©ëŒ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”ë˜ëŠ”ê°€?
2. "X" ë²„íŠ¼ìœ¼ë¡œ ë°°ë„ˆ ë‹«íˆëŠ”ê°€?

#### WebSocket
1. ì—°ê²° ëŠê¹€ ì‹œ "(WebSocket ì—°ê²° ëŠê¹€)" í‘œì‹œë˜ëŠ”ê°€?
2. ë°±ì—”ë“œ ì¬ì‹œì‘ í›„ ì¬ì—°ê²° ì‹œë„ë˜ëŠ”ê°€?

### 6. ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸

```
INFO: [ConflictWS] New connection. Total: 1
WARNING: âš ï¸ [CONFLICT_DETECTED] AAPL by strategy-trading. Detail: {...}
INFO: [ConflictWS] Broadcasting to 1 clients
INFO: [ConflictWS] Connection closed. Total: 0
```

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ (Phase 6)

### Phase 6: Position Tracking & Portfolio Management

1. **T6.1: Position Tracker**
   - ì‹¤ì‹œê°„ í¬ì§€ì…˜ ì¶”ì 
   - ì†ìµ ê³„ì‚°
   - í¬íŠ¸í´ë¦¬ì˜¤ ë°¸ë¥˜ ì—…ë°ì´íŠ¸

2. **T6.2: Portfolio Rebalancing**
   - ì „ëµë³„ í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹±
   - ëª©í‘œ ë¹„ì¤‘ ê´€ë¦¬
   - ë¦¬ë°¸ëŸ°ì‹± ì œì•ˆ

3. **T6.3: Performance Analytics**
   - ì „ëµë³„ ì„±ê³¼ ë¶„ì„
   - Sharpe Ratio, MDD ê³„ì‚°
   - ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¹„êµ

---

## âœ… ê²°ë¡ 

Phase 5, T5.5 ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼**:
- âœ… ConflictAlertBanner ì»´í¬ë„ŒíŠ¸ ì™„ì„±
- âœ… WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì•Œë¦¼
- âœ… Event Bus ì—°ë™
- âœ… ë°±ì—”ë“œ WebSocket ì—”ë“œí¬ì¸íŠ¸
- âœ… ì¶©ëŒ íƒ€ì…ë³„ UI í‘œì‹œ
- âœ… ìë™/ìˆ˜ë™ ë‹«í˜ ê¸°ëŠ¥
- âœ… í•œê¸€ UI ì™„ë£Œ

**Phase 5 ì „ì²´ ì™„ë£Œ**:
- âœ… T5.1: Multi-Strategy Schema & Repository
- âœ… T5.2: Strategy CRUD API
- âœ… T5.3: Strategy Dashboard UI
- âœ… T5.4: Position Ownership Table
- âœ… T5.5: Conflict Alert Banner

**í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì†**:
```
http://localhost:3002/strategies
```

**WebSocket ì—”ë“œí¬ì¸íŠ¸**:
```
ws://localhost:8001/api/conflicts/ws
```

**ë‹¤ìŒ ì‘ì—…**: Phase 6, T6.1 (Position Tracker êµ¬í˜„) ì§„í–‰ ì˜ˆì •

---

**ì‘ì„±ì**: Claude Code
**ê²€í† ì**: -
**ìŠ¹ì¸ì**: -
**Commit**: e2e3d8e
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-01-13
